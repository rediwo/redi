{{layout 'admin'}}

<script @server>
res.render({
    Title: "Post Management",
    posts: [
        { id: 1, title: "Welcome to our blog", status: "published", author: "Admin", date: "2024-01-15" },
        { id: 2, title: "Getting started with Redi", status: "published", author: "Developer", date: "2024-01-20" },
        { id: 3, title: "Draft Post", status: "draft", author: "Editor", date: "2024-01-25" }
    ]
});
</script>

<h1>Post Management</h1>

<div class="admin-panel">
    <h2>Create New Post</h2>
    <form method="POST" action="/api/posts">
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required>
        </div>
        <div class="form-group">
            <label for="content">Content:</label>
            <textarea id="content" name="content" rows="10" required></textarea>
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <div class="form-group">
                <label for="author">Author:</label>
                <input type="text" id="author" name="author" required>
            </div>
            <div class="form-group">
                <label for="status">Status:</label>
                <select id="status" name="status" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option value="draft">Draft</option>
                    <option value="published">Published</option>
                    <option value="archived">Archived</option>
                </select>
            </div>
            <div class="form-group">
                <label for="tags">Tags (comma separated):</label>
                <input type="text" id="tags" name="tags" placeholder="tag1, tag2, tag3">
            </div>
        </div>
        <button type="submit" class="btn">Create Post</button>
    </form>
</div>

<div class="admin-panel">
    <h2>Existing Posts</h2>
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #f8f9fa;">
                <th style="padding: 10px; border: 1px solid #ddd;">ID</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Title</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Author</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Status</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Date</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{range .posts}}
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">{{.id}}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{.title}}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{.author}}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">
                    <span style="color: {{if eq .status "published"}}green{{else if eq .status "draft"}}orange{{else}}gray{{end}};">{{.status}}</span>
                </td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{.date}}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">
                    <a href="/blog/{{.id}}" class="btn" style="font-size: 12px; padding: 5px 10px; margin-right: 5px; text-decoration: none;">View</a>
                    <button class="btn" style="font-size: 12px; padding: 5px 10px; margin-right: 5px;">Edit</button>
                    <button class="btn" style="font-size: 12px; padding: 5px 10px; background-color: #dc3545;">Delete</button>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>